<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Loter.IA | Acesso Enviado</title>
  <!-- Meta Pixel Code -->
  <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '1185694843449930');
    fbq('track', 'PageView');
    fbq('track', 'ViewContent');
    fbq('track', 'Purchase', {value: 37.00, currency: 'BRL'});
    fbq('track', 'Subscribe');
  </script>
  <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=1185694843449930&ev=PageView&noscript=1"/></noscript>
  <!-- End Meta Pixel Code -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Archivo:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="thanks.css">
</head>
<body class="thank-body">
  <header class="thank-header">
    <img class="brand-logo" src="https://i.ibb.co/r2FFdKRw/Logo-Lumen-1.png" alt="Logo Loter.IA">
  </header>

  <main class="thank-wrapper">
    <section class="thank-card">
      <span class="badge badge--success">Tudo certo!</span>
      <h1>Seu acesso foi enviado por e-mail</h1>
      <p class="lead">
        Verifique a caixa de entrada do e-mail informado e procure pelo assunto
        <strong>‚ÄúBem-vindo √† Loter.IA‚Äù</strong>. L√° voc√™ encontra o link de login,
        o passo a passo para ativar a IA e os b√¥nus extras liberados no seu plano anual.
      </p>

      <div class="info-grid">
        <div class="info-box">
          <h2>N√£o encontrou o e-mail?</h2>
          <ul>
            <li>Cheque as abas Promo√ß√µes, Atualiza√ß√µes ou Spam.</li>
            <li>Adicione <strong>noreply@mail.app.supabase.io</strong> √† sua lista de contatos.</li>
            <li>Solicite reenvio respondendo a qualquer mensagem nossa.</li>
          </ul>
        </div>
        <div class="info-box">
          <h2>Pr√≥ximos passos liberados</h2>
          <ul>
            <li>Acesso ao painel da Lotof√°cil com an√°lises atualizadas.</li>
            <li>IA da Mega-Sena e +5 loterias liberadas como b√¥nus.</li>
            <li>Mais de 10 combina√ß√µes inteligentes por sorteio para testar.</li>
          </ul>
        </div>
      </div>

      <div class="instant-access-card">
        <h3>üöÄ Acesse sua conta AGORA (sem precisar do email)</h3>
        <p>
          N√£o conseguiu acessar o email? Sem problemas! Defina sua senha aqui e acesse imediatamente.
        </p>
        <form id="instant-access-form" class="instant-access-form">
          <div class="form-group">
            <label for="user-email">Seu e-mail de compra</label>
            <input
              type="email"
              id="user-email"
              placeholder="seu@email.com"
              required
            />
          </div>
          <div class="form-group">
            <label for="user-password">Criar senha (m√≠nimo 6 caracteres)</label>
            <input
              type="password"
              id="user-password"
              placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
              minlength="6"
              required
            />
          </div>
          <button type="submit" class="quiz-btn quiz-btn--primary" id="instant-access-btn">
            CRIAR SENHA E ACESSAR
          </button>
          <div id="instant-access-feedback" class="instant-access-feedback"></div>
        </form>
      </div>

      <div class="contact-card">
        <h3>Precisa de ajuda?</h3>
        <p>
          Nosso suporte responde em at√© 24h √∫teis. Basta enviar um e-mail para
          <strong>contato.fqdigital@gmail.com</strong>.
        </p>
      </div>

      <a class="quiz-btn quiz-btn--primary" href="index.html">Voltar para o in√≠cio</a>
    </section>
  </main>

  <footer class="thank-footer">
    <p>¬© <span id="year"></span> Loter.IA ‚Äî Intelig√™ncia estat√≠stica que transforma suas apostas em estrat√©gia.</p>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // Instant access form handler
    const instantAccessForm = document.getElementById('instant-access-form');
    const instantAccessBtn = document.getElementById('instant-access-btn');
    const instantAccessFeedback = document.getElementById('instant-access-feedback');

    if (instantAccessForm) {
      instantAccessForm.addEventListener('submit', async (e) => {
        e.preventDefault();

        const email = document.getElementById('user-email').value;
        const password = document.getElementById('user-password').value;

        // Disable button and show loading
        instantAccessBtn.disabled = true;
        instantAccessBtn.textContent = 'CRIANDO ACESSO...';
        instantAccessFeedback.textContent = '';
        instantAccessFeedback.className = 'instant-access-feedback';

        try {
          const response = await fetch('https://qcvlxzrxyisjpzriwikp.supabase.co/functions/v1/create-password-direct', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({ email, password })
          });

          const data = await response.json();

          if (data.success) {
            // Success!
            instantAccessFeedback.className = 'instant-access-feedback instant-access-feedback--success';
            instantAccessFeedback.textContent = '‚úÖ ' + data.message + ' Redirecionando...';

            // Redirect to login after 2 seconds
            setTimeout(() => {
              window.location.href = 'https://www.fqdigital.com.br/app/auth';
            }, 2000);
          } else {
            // Error from API
            throw new Error(data.error || 'Erro ao criar senha');
          }
        } catch (error) {
          console.error('Instant access error:', error);
          instantAccessFeedback.className = 'instant-access-feedback instant-access-feedback--error';
          instantAccessFeedback.textContent = '‚ùå ' + (error.message || 'Erro ao criar senha. Tente novamente.');

          // Re-enable button
          instantAccessBtn.disabled = false;
          instantAccessBtn.textContent = 'CRIAR SENHA E ACESSAR';
        }
      });
    }
  </script>
</body>
</html>
